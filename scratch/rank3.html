<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>

	<title>rank3.html</title>

    <style type="text/css" media="screen">
        td {
            border: 1px solid #CCC;
        }
    </style>

    <script type="text/javascript" src ="_base/js/jquery-1.3.2.min.js" charset="utf-8"></script>
    <script type="text/javascript" charset="utf-8">
        $(function(){
        
            function addRow(items) {
                var cells = '';
                for ( i=0; i < items.length; i++) {
                    cells += '<td>' + items[i] + '</td>';
                }
                var row = $('<tr />');
                row.append( cells );
                $('table').append( row );                
            }
            
            function getRank(s, currentScores) {
                var scores = [];
                var ranks = [];

                for ( ii=0; ii < currentScores.length; ii++) {
                    scores[ii] = {
                        score: currentScores[ii],
                        ident: ii
                    };
                }

                scores.sort(function(a,b){return b.score - a.score});

                for ( ii=0; ii < scores.length; ii++) {
                    var identI = scores[ii].ident;
                    ranks[identI] = ii;
                }
                
                return ranks[s];
                
            }
            
            
            var originalScores = [120, 150, 30, 290, 150, 100, 340, 150];
            
            addRow(originalScores);
    

            var theseRanks = [];
            for (i=0; i < originalScores.length; i++) {
                var r = getRank(i, originalScores);
                theseRanks[i] = r;
            }

            addRow(theseRanks);

        });
    </script>

</head>

<body>


	<h1>rank3.html</h1>

    <hr />

    <table></table>

</body>

</html>
